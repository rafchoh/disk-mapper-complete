-- H2 2.3.232;
;             
CREATE USER IF NOT EXISTS "SA" SALT '06dedaeb70b8bb31' HASH '1835558c210d6963bb327a13c1851b110037b145d09852a16d4394a394382204' ADMIN;         
CREATE CACHED TABLE "PUBLIC"."DRIVE_FILES"(
    "ID" BIGINT GENERATED BY DEFAULT AS IDENTITY(START WITH 1) NOT NULL,
    "FILE_NAME" CHARACTER VARYING(255) NOT NULL,
    "FILE_PATH" CHARACTER LARGE OBJECT NOT NULL,
    "IS_DIRECTORY" BOOLEAN NOT NULL,
    "LAST_MODIFIED" TIMESTAMP(6),
    "PARENT_PATH" CHARACTER LARGE OBJECT NOT NULL,
    "DRIVE_ID" BIGINT NOT NULL
);               
ALTER TABLE "PUBLIC"."DRIVE_FILES" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_E" PRIMARY KEY("ID");  
-- 0 +/- SELECT COUNT(*) FROM PUBLIC.DRIVE_FILES;             

CREATE CACHED TABLE "PUBLIC"."DRIVES"(
    "ID" BIGINT GENERATED BY DEFAULT AS IDENTITY(START WITH 1) NOT NULL,
    "DRIVE_MAP" CHARACTER LARGE OBJECT,
    "DRIVE_NAME" CHARACTER VARYING(255) NOT NULL,
    "DRIVE_PATH" CHARACTER VARYING(255),
    "DRIVE_SIZE" CHARACTER VARYING(255) NOT NULL,
    "IS_EXTERNAL" BOOLEAN NOT NULL,
    "LAST_MAPPED" TIMESTAMP(6) NOT NULL,
    "STORAGE_LEFT" CHARACTER VARYING(255) NOT NULL,
    "PC_ID" BIGINT,
    "USER_ID" BIGINT NOT NULL
);         
ALTER TABLE "PUBLIC"."DRIVES" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_7" PRIMARY KEY("ID");       
-- 0 +/- SELECT COUNT(*) FROM PUBLIC.DRIVES;  

CREATE CACHED TABLE "PUBLIC"."PCS"(
    "ID" BIGINT GENERATED BY DEFAULT AS IDENTITY(START WITH 1) NOT NULL,
    "PC_ADDED" TIMESTAMP(6) NOT NULL,
    "PC_INFO" CHARACTER VARYING(255),
    "PC_MODEL" CHARACTER VARYING(255),
    "PC_NAME" CHARACTER VARYING(255),
    "USER_ID" BIGINT NOT NULL
); 
ALTER TABLE "PUBLIC"."PCS" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_1" PRIMARY KEY("ID");          
-- 0 +/- SELECT COUNT(*) FROM PUBLIC.PCS;     

CREATE CACHED TABLE "PUBLIC"."RESET_TOKENS"(
    "ID" BIGINT GENERATED BY DEFAULT AS IDENTITY(START WITH 1) NOT NULL,
    "CREATED_AT" TIMESTAMP(6) NOT NULL,
    "TOKEN" CHARACTER VARYING(255) NOT NULL,
    "USER_ID" BIGINT NOT NULL
);              
ALTER TABLE "PUBLIC"."RESET_TOKENS" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_D" PRIMARY KEY("ID"); 
-- 0 +/- SELECT COUNT(*) FROM PUBLIC.RESET_TOKENS;            

CREATE CACHED TABLE "PUBLIC"."USERS"(
    "ID" BIGINT GENERATED BY DEFAULT AS IDENTITY(START WITH 1 RESTART WITH 35) NOT NULL,
    "EMAIL" CHARACTER VARYING(255),
    "FULL_NAME" CHARACTER VARYING(255) NOT NULL,
    "PASSWORD" CHARACTER VARYING(255) NOT NULL,
    "RECOVERY_MODE" BOOLEAN NOT NULL,
    "USERNAME" CHARACTER VARYING(255) NOT NULL
);            
ALTER TABLE "PUBLIC"."USERS" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_4" PRIMARY KEY("ID");        
-- 1 +/- SELECT COUNT(*) FROM PUBLIC.USERS;

ALTER TABLE "PUBLIC"."USERS" ADD CONSTRAINT "PUBLIC"."UK6DOTKOTT2KJSP8VW4D0M25FB7" UNIQUE NULLS DISTINCT ("EMAIL");           
ALTER TABLE "PUBLIC"."USERS" ADD CONSTRAINT "PUBLIC"."UKR43AF9AP4EDM43MMTQ01ODDJ6" UNIQUE NULLS DISTINCT ("USERNAME");        
ALTER TABLE "PUBLIC"."RESET_TOKENS" ADD CONSTRAINT "PUBLIC"."UKQLXWHP9X98DMOL17GVDVBDPBX" UNIQUE NULLS DISTINCT ("USER_ID");  
ALTER TABLE "PUBLIC"."RESET_TOKENS" ADD CONSTRAINT "PUBLIC"."FKK9RK4PNM1YA8WCMY78R9GMUXV" FOREIGN KEY("USER_ID") REFERENCES "PUBLIC"."USERS"("ID") ON DELETE CASCADE NOCHECK; 
ALTER TABLE "PUBLIC"."DRIVE_FILES" ADD CONSTRAINT "PUBLIC"."FK1UOFGTW52C1NE9637G4B12GPQ" FOREIGN KEY("DRIVE_ID") REFERENCES "PUBLIC"."DRIVES"("ID") ON DELETE CASCADE NOCHECK;
ALTER TABLE "PUBLIC"."DRIVES" ADD CONSTRAINT "PUBLIC"."FKNUFS7DRP8WQXDA7HK3S4NHWLQ" FOREIGN KEY("USER_ID") REFERENCES "PUBLIC"."USERS"("ID") ON DELETE CASCADE NOCHECK;       
ALTER TABLE "PUBLIC"."PCS" ADD CONSTRAINT "PUBLIC"."FKQYP2YWGEJ8MKQJ94N208BS4RU" FOREIGN KEY("USER_ID") REFERENCES "PUBLIC"."USERS"("ID") ON DELETE CASCADE NOCHECK;          
ALTER TABLE "PUBLIC"."DRIVES" ADD CONSTRAINT "PUBLIC"."FK6E5QWIC11MXE9W4U6DN3WS8OS" FOREIGN KEY("PC_ID") REFERENCES "PUBLIC"."PCS"("ID") ON DELETE CASCADE NOCHECK;           

-- 2 +/- username: test, password: 44
INSERT INTO "PUBLIC"."USERS" VALUES
(1, 'rafchoh@gmail.com', 'Rafet H', '$2a$10$UiHBWftb3w9uQn584FX1FeqamdDltUomJ5nf0FyOugaI5bvxbrBAq', FALSE, 'test'),